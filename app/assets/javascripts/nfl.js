// Generated by CoffeeScript 1.3.3
var nflApp;

nflApp = angular.module("nflApp", ["ngResource", "customFilters"]);

nflApp.controller("TeamsController", [
  "$scope", "Team", function($scope, Team) {
    $scope.heading = "Teams of the NFL";
    $scope.teams = Team.query();
    $scope.newTeam = {
      city: "atlanta",
      name: "falcons",
      abbr: "atl",
      conference: "nfc",
      division: "south"
    };
    return $scope.create = function() {
      return Team.save($scope.newTeam, (function(resource) {
        $scope.teams.push(resource);
        return $scope.newTeam = {};
      }), function(response) {
        return console.error("Error " + response.status);
      });
    };
  }
]);

nflApp.factory("Team", [
  "$resource", function($resource) {
    return $resource("/teams");
  }
]);

nflApp.controller("PlayersController", [
  "$scope", "Player", "Roster", function($scope, Player, Roster) {
    $scope.heading = "Players of the NFL";
    $scope.players = Roster.query({
      abbr: $scope.abbr
    });
    return $scope.fetchRoster = function() {
      return $scope.players = Roster.query({
        abbr: $scope.abbr
      });
    };
  }
]);

nflApp.factory("Player", [
  "$resource", function($resource) {
    return $resource("/players");
  }
]);

nflApp.factory("Roster", [
  "$resource", function($resource) {
    return $resource("/teams/:abbr/roster");
  }
]);

angular.module("customFilters", []).filter("titleize", function() {
  return function(input) {
    return input.charAt(0).toUpperCase() + input.slice(1);
  };
});
